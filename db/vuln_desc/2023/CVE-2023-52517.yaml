descriptions:
- lang: en
  value: 'In the Linux kernel, the following vulnerability has been resolved:


    spi: sun6i: fix race between DMA RX transfer completion and RX FIFO drain


    Previously the transfer complete IRQ immediately drained to RX FIFO to

    read any data remaining in FIFO to the RX buffer. This behaviour is

    correct when dealing with SPI in interrupt mode. However in DMA mode the

    transfer complete interrupt still fires as soon as all bytes to be

    transferred have been stored in the FIFO. At that point data in the FIFO

    still needs to be picked up by the DMA engine. Thus the drain procedure

    and DMA engine end up racing to read from RX FIFO, corrupting any data

    read. Additionally the RX buffer pointer is never adjusted according to

    DMA progress in DMA mode, thus calling the RX FIFO drain procedure in DMA

    mode is a bug.

    Fix corruptions in DMA RX mode by draining RX FIFO only in interrupt mode.

    Also wait for completion of RX DMA when in DMA mode before returning to

    ensure all data has been copied to the supplied memory buffer.'
- lang: es
  value: "En el kernel de Linux, se resolvi\xF3 la siguiente vulnerabilidad: spi:\
    \ sun6i: corrigi\xF3 la ejecuci\xF3n entre la finalizaci\xF3n de la transferencia\
    \ DMA RX y el drenaje FIFO RX Anteriormente, la IRQ completa de la transferencia\
    \ se drenaba inmediatamente a RX FIFO para leer cualquier dato restante en FIFO\
    \ al b\xFAfer RX. Este comportamiento es correcto cuando se trata de SPI en modo\
    \ de interrupci\xF3n. Sin embargo, en el modo DMA, la interrupci\xF3n de transferencia\
    \ completa a\xFAn se activa tan pronto como todos los bytes a transferir se hayan\
    \ almacenado en el FIFO. En ese momento, el motor DMA todav\xEDa debe recoger\
    \ los datos del FIFO. Por lo tanto, el procedimiento de drenaje y el motor DMA\
    \ terminan corriendo para leer desde RX FIFO, corrompiendo cualquier lectura de\
    \ datos. Adem\xE1s, el puntero del b\xFAfer RX nunca se ajusta seg\xFAn el progreso\
    \ de DMA en modo DMA, por lo que llamar al procedimiento de drenaje FIFO de RX\
    \ en modo DMA es un error. Corrija corrupciones en el modo DMA RX drenando RX\
    \ FIFO solo en modo de interrupci\xF3n. Espere tambi\xE9n a que se complete RX\
    \ DMA cuando est\xE9 en modo DMA antes de regresar para asegurarse de que todos\
    \ los datos se hayan copiado en el b\xFAfer de memoria suministrado."
id: CVE-2023-52517
lastModified: '2024-03-04T13:58:23.447'
metrics: {}
published: '2024-03-02T22:15:47.923'
references:
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/1f11f4202caf5710204d334fe63392052783876d
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/36b29974a7ad2ff604c24ad348f940506c7b1209
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/4e149d524678431638ff378ef6025e4e89b71097
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/bd1ec7f9983b5cd3c77e0f7cda3fa8aed041af2f
sourceIdentifier: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
vulnStatus: Awaiting Analysis
