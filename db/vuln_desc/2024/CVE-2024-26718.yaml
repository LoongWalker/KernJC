descriptions:
- lang: en
  value: 'In the Linux kernel, the following vulnerability has been resolved:


    dm-crypt, dm-verity: disable tasklets


    Tasklets have an inherent problem with memory corruption. The function

    tasklet_action_common calls tasklet_trylock, then it calls the tasklet

    callback and then it calls tasklet_unlock. If the tasklet callback frees

    the structure that contains the tasklet or if it calls some code that may

    free it, tasklet_unlock will write into free memory.


    The commits 8e14f610159d and d9a02e016aaf try to fix it for dm-crypt, but

    it is not a sufficient fix and the data corruption can still happen [1].

    There is no fix for dm-verity and dm-verity will write into free memory

    with every tasklet-processed bio.


    There will be atomic workqueues implemented in the kernel 6.9 [2]. They

    will have better interface and they will not suffer from the memory

    corruption problem.


    But we need something that stops the memory corruption now and that can be

    backported to the stable kernels. So, I''m proposing this commit that

    disables tasklets in both dm-crypt and dm-verity. This commit doesn''t

    remove the tasklet support, because the tasklet code will be reused when

    atomic workqueues will be implemented.


    [1] https://lore.kernel.org/all/d390d7ee-f142-44d3-822a-87949e14608b@suse.de/T/

    [2] https://lore.kernel.org/lkml/20240130091300.2968534-1-tj@kernel.org/'
- lang: es
  value: "En el kernel de Linux, se ha resuelto la siguiente vulnerabilidad: dm-crypt,\
    \ dm-verity: deshabilitar tasklets Los tasklets tienen un problema inherente con\
    \ la corrupci\xF3n de la memoria. La funci\xF3n tasklet_action_common llama a\
    \ tasklet_trylock, luego llama a la devoluci\xF3n de llamada del tasklet y luego\
    \ llama a tasklet_unlock. Si la devoluci\xF3n de llamada del tasklet libera la\
    \ estructura que contiene el tasklet o si llama a alg\xFAn c\xF3digo que pueda\
    \ liberarlo, tasklet_unlock escribir\xE1 en la memoria libre. Las confirmaciones\
    \ 8e14f610159d y d9a02e016aaf intentan solucionarlo para dm-crypt, pero no es\
    \ una soluci\xF3n suficiente y la corrupci\xF3n de datos a\xFAn puede ocurrir\
    \ [1]. No hay ninguna soluci\xF3n para dm-verity y dm-verity escribir\xE1 en la\
    \ memoria libre con cada biograf\xEDa procesada por tasklet. Habr\xE1 colas de\
    \ trabajo at\xF3micas implementadas en el kernel 6.9 [2]. Tendr\xE1n una mejor\
    \ interfaz y no sufrir\xE1n el problema de corrupci\xF3n de memoria. Pero necesitamos\
    \ algo que detenga la corrupci\xF3n de la memoria ahora y que pueda ser compatible\
    \ con los n\xFAcleos estables. Entonces, propongo esta confirmaci\xF3n que deshabilita\
    \ los tasklets tanto en dm-crypt como en dm-verity. Esta confirmaci\xF3n no elimina\
    \ la compatibilidad con el tasklet, porque el c\xF3digo del tasklet se reutilizar\xE1\
    \ cuando se implementen las colas de trabajo at\xF3micas. [1] https://lore.kernel.org/all/d390d7ee-f142-44d3-822a-87949e14608b@suse.de/T/\
    \ [2] https://lore.kernel.org/lkml/20240130091300.2968534-1- tj@kernel.org/"
id: CVE-2024-26718
lastModified: '2024-04-03T17:24:18.150'
metrics: {}
published: '2024-04-03T15:15:53.897'
references:
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/0a9bab391e336489169b95cb0d4553d921302189
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/0c45a20cbe68bc4d681734f5c03891124a274257
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/30884a44e0cedc3dfda8c22432f3ba4078ec2d94
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/5735a2671ffb70ea29ca83969fe01316ee2ed6fc
sourceIdentifier: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
vulnStatus: Awaiting Analysis
