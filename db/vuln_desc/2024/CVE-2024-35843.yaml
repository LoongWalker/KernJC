descriptions:
- lang: en
  value: 'In the Linux kernel, the following vulnerability has been resolved:


    iommu/vt-d: Use device rbtree in iopf reporting path


    The existing I/O page fault handler currently locates the PCI device by

    calling pci_get_domain_bus_and_slot(). This function searches the list

    of all PCI devices until the desired device is found. To improve lookup

    efficiency, replace it with device_rbtree_find() to search the device

    within the probed device rbtree.


    The I/O page fault is initiated by the device, which does not have any

    synchronization mechanism with the software to ensure that the device

    stays in the probed device tree. Theoretically, a device could be released

    by the IOMMU subsystem after device_rbtree_find() and before

    iopf_get_dev_fault_param(), which would cause a use-after-free problem.


    Add a mutex to synchronize the I/O page fault reporting path and the IOMMU

    release device path. This lock doesn''t introduce any performance overhead,

    as the conflict between I/O page fault reporting and device releasing is

    very rare.'
- lang: es
  value: "En el kernel de Linux, se resolvi\xF3 la siguiente vulnerabilidad: iommu/vt-d:\
    \ use el rbtree del dispositivo en la ruta de informes iopf. El controlador de\
    \ fallos de la p\xE1gina de E/S existente actualmente ubica el dispositivo PCI\
    \ llamando a pci_get_domain_bus_and_slot(). Esta funci\xF3n busca en la lista\
    \ de todos los dispositivos PCI hasta encontrar el dispositivo deseado. Para mejorar\
    \ la eficiencia de la b\xFAsqueda, reempl\xE1celo con device_rbtree_find() para\
    \ buscar el dispositivo dentro del rbtree del dispositivo probado. El fallo de\
    \ la p\xE1gina de E/S la inicia el dispositivo, que no tiene ning\xFAn mecanismo\
    \ de sincronizaci\xF3n con el software para garantizar que el dispositivo permanezca\
    \ en el \xE1rbol de dispositivos analizados. En teor\xEDa, el subsistema IOMMU\
    \ podr\xEDa liberar un dispositivo despu\xE9s de device_rbtree_find() y antes\
    \ de iopf_get_dev_fault_param(), lo que causar\xEDa un problema de uso despu\xE9\
    s de la liberaci\xF3n. Agregue un mutex para sincronizar la ruta de informe de\
    \ fallos de la p\xE1gina de E/S y la ruta del dispositivo de liberaci\xF3n IOMMU.\
    \ Este bloqueo no introduce ninguna sobrecarga de rendimiento, ya que el conflicto\
    \ entre el informe de fallos de la p\xE1gina de E/S y la liberaci\xF3n del dispositivo\
    \ es muy raro."
id: CVE-2024-35843
lastModified: '2024-05-17T18:35:35.070'
metrics: {}
published: '2024-05-17T15:15:21.313'
references:
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/3d39238991e745c5df85785604f037f35d9d1b15
- source: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
  url: https://git.kernel.org/stable/c/def054b01a867822254e1dda13d587f5c7a99e2a
sourceIdentifier: 416baaa9-dc9f-4396-8d5f-8c081fb06d67
vulnStatus: Awaiting Analysis
